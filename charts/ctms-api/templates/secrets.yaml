{{- if .Values.externalSecrets.enabled -}}
apiVersion: kubernetes-client.io/v1
kind: ExternalSecrets
metadata:
  name: {{ include "ctms-api.fullname" . }}
spec:
  backendType: secretsManager
  dataFrom:
  - {{ .Values.externalSecrets.secretName }}
{{- else }}
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "ctms-api.fullname" .}}
data:
  # echo -n "postgresql://postgres@postgres/ctms | base64 -w 0"
  CTMS_DB_URL: cG9zdGdyZXNxbDovL3Bvc3RncmVzQHBvc3RncmVzL2N0bXM=
{{- end }}
